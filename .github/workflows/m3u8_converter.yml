name: M3U8_Creator

on:
  workflow_dispatch:
  # Run 6 Hours after https://github.com/Winges4k/iptvcat-scrapper
  # 12.10 UTC Time, 06.10 Central Time
  # Changed to every 3hrs, due to including Youtube links and Pluto, so those links are always correct.
  schedule:
    - cron: "0 0/3 * * *"
  push:
    branches:
    - master
    - main

jobs:

  Running_M3U8_Creator:
    name: Running M3U8 Creator
    runs-on: "ubuntu-latest"

    steps:
      - uses: actions/checkout@v2

      - name: Last Attempts
        run: |
          git config --local user.email "action@github.com"
          git config --local user.name "GitHub Action"
          echo $(date) >> last_attempt.txt
          cat last_attempt.txt
          ls -ltr
          git status
          git add last_attempt.txt
          git status
          git commit -m "cron: setting last attempt time stamp" -a
          git status
          git push
          
                 
      - name: Cleanup Files
        run: |
          git config --local user.email "action@github.com"
          git config --local user.name "GitHub Action"
          git rm ./tests/m3u8/*.m3u8
          git rm ./m3u8/*.m3u8
          git rm ./*.m3u8
          git rm ./tests/epg/*.gz
          git rm ./epg/*.gz
          git rm ./temp/m3u8_static/*.m3u8
          git rm ./temp/all_streams_tmp/*.json
                                  
      - name: Push changes for old files
        uses: ad-m/github-push-action@master
        with:
          github_token: ${{ secrets.scrapper_token }}
          branch: ${{ github.ref }}
          
      - name: Commit All Files
        uses: zwaldowski/git-commit-action@v1
        with:
             commit_message: Updated by Bot - ${{ steps.date.outputs.date }}
             working_directory: .

      ### SETUP THE ENVIRONMENT
      - name: Setup Python
        uses: actions/setup-python@v2
        with:
          python-version: '3.9'

      - name: Setup Environment
        # e.g. create work dirst, store in env variables ... https://docs.github.com/en/free-pro-team@latest/actions/reference/workflow-commands-for-github-actions
        run: |
          echo "IPTVCAT_DATE=$(date '+%Y-%m-%d')" >> $GITHUB_ENV
          echo "IPTVCAT_DATE_YESTERDAY=$(date -d "yesterday 7:00" '+%Y-%m-%d')" >> $GITHUB_ENV
          echo "IPTVCAT_DOWNLOAD_DIR=./temp/iptvcat" >> $GITHUB_ENV
          echo "M3U8_DIR=./tests/m3u8/" >> $GITHUB_ENV
          echo "EPG_TEMP_DIR=./tests/epg/" >> $GITHUB_ENV
          echo "M3U8_STATIC_DIR=./temp/m3u8_static/" >> $GITHUB_ENV
          echo "M3U8_STATIC_DIR2=./temp/m3u8_static/all/" >> $GITHUB_ENV
          # Update pythonpath used for our scripts
          echo "PYTHONPATH=$PYTHONPATH:${{ github.workspace }}" >> $GITHUB_ENV
      - name: Setup Dirs
        run: |
          echo "IPTVCAT_DATE: '${IPTVCAT_DATE}'"
          echo "IPTVCAT_DATE_YESTERDAY: '${IPTVCAT_DATE_YESTERDAY}'"
          echo "IPTVCAT_DOWNLOAD_DIR: '${IPTVCAT_DOWNLOAD_DIR}'"
          echo "M3U8_DIR: '${M3U8_DIR}'"
          echo "EPG_TEMP_DIR: '${EPG_TEMP_DIR}'"
          echo "M3U8_STATIC_DIR: '${M3U8_STATIC_DIR}'"
          echo "Command: 'mkdir -p ${IPTVCAT_DOWNLOAD_DIR}'"
          mkdir -p ${IPTVCAT_DOWNLOAD_DIR}
          echo "Command: 'mkdir -p ${M3U8_DIR}'"
          mkdir -p ${M3U8_DIR}
          echo "Command: 'mkdir -p ${EPG_TEMP_DIR}'"
          mkdir -p ${EPG_TEMP_DIR}
          echo "Command: 'mkdir -p ${M3U8_STATIC_DIR2}'"
          mkdir -p ${M3U8_STATIC_DIR2}
          echo "Command: 'mkdir -p ${M3U8_STATIC_DIR}'"
          mkdir -p ${M3U8_STATIC_DIR}
          echo "Command: 'ls -alt ${IPTVCAT_DOWNLOAD_DIR}'"
          ls -alt ${IPTVCAT_DOWNLOAD_DIR}
          echo "Command: 'ls -alt ${M3U8_DIR}'"
          ls -alt ${M3U8_DIR}
          echo "Command: 'ls -alt ${EPG_TEMP_DIR}'"
          ls -alt ${EPG_TEMP_DIR}
          echo "Command: 'ls -alt ${M3U8_STATIC_DIR}'"
          ls -alt ${M3U8_STATIC_DIR}
          echo "Command: 'ls -alt ${M3U8_STATIC_DIR2}'"
          ls -alt ${M3U8_STATIC_DIR2}
      - name: Get other m3u8s to add
        run: |
        
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/Sphinxroot/IPTVM3U/master/Dash%20Radio.m3u" "${M3U8_STATIC_DIR}" "dashradio.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/Sphinxroot/IPTVM3U/master/Dash%20Radio.m3u" "${M3U8_STATIC_DIR}" "dashradio.m3u8"
           
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/ParrotDevelopers/Parrot-TV-M3U/master/M3U/USTVGO/Main.m3u" "${M3U8_STATIC_DIR}" "parrottv.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/ParrotDevelopers/Parrot-TV-M3U/master/M3U/USTVGO/Main.m3u" "${M3U8_STATIC_DIR}" "parrottv.m3u8"
             
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/60s.m3u" "${M3U8_STATIC_DIR}" "radio60s.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/60s.m3u" "${M3U8_STATIC_DIR}" "radio60s.m3u8"
             
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/70s.m3u" "${M3U8_STATIC_DIR}" "radio70s.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/70s.m3u" "${M3U8_STATIC_DIR}" "radio70s.m3u8"
             
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/80s.m3u" "${M3U8_STATIC_DIR}" "radio80s.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/80s.m3u" "${M3U8_STATIC_DIR}" "radio80s.m3u8"
             
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/90s.m3u" "${M3U8_STATIC_DIR}" "radio90s.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/90s.m3u" "${M3U8_STATIC_DIR}" "radio90s.m3u8"
             
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/acid_jazz.m3u" "${M3U8_STATIC_DIR}" "radioacid.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/acid_jazz.m3u" "${M3U8_STATIC_DIR}" "radioacid.m3u8"
             
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/african.m3u" "${M3U8_STATIC_DIR}" "radioafrican.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/african.m3u" "${M3U8_STATIC_DIR}" "radioafrican.m3u8"
             
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/alternative.m3u" "${M3U8_STATIC_DIR}" "radioalternative.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/alternative.m3u" "${M3U8_STATIC_DIR}" "radioalternative.m3u8"
             
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/ambient.m3u" "${M3U8_STATIC_DIR}" "radioambient.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/ambient.m3u" "${M3U8_STATIC_DIR}" "radioambient.m3u8"
             
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/americana.m3u" "${M3U8_STATIC_DIR}" "radioamericana.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/americana.m3u" "${M3U8_STATIC_DIR}" "radioamericana.m3u8"
             
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/anime.m3u" "${M3U8_STATIC_DIR}" "radioanime.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/anime.m3u" "${M3U8_STATIC_DIR}" "radioanime.m3u8"
             
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/big_band.m3u" "${M3U8_STATIC_DIR}" "radiobig_band.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/big_band.m3u" "${M3U8_STATIC_DIR}" "radiobig_band.m3u8"
             
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/bluegrass.m3u" "${M3U8_STATIC_DIR}" "radiobluegrass.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/bluegrass.m3u" "${M3U8_STATIC_DIR}" "radiobluegrass.m3u8"
             
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/blues.m3u" "${M3U8_STATIC_DIR}" "radioblues.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/blues.m3u" "${M3U8_STATIC_DIR}" "radioblues.m3u8"
             
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/breakbeat.m3u" "${M3U8_STATIC_DIR}" "radiobreakbeat.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/breakbeat.m3u" "${M3U8_STATIC_DIR}" "radiobreakbeat.m3u8"
             
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/chillout.m3u" "${M3U8_STATIC_DIR}" "radiochillout.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/chillout.m3u" "${M3U8_STATIC_DIR}" "radiochillout.m3u8"
             
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/christian.m3u" "${M3U8_STATIC_DIR}" "radiochristian.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/christian.m3u" "${M3U8_STATIC_DIR}" "radiochristian.m3u8"
             
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/classical.m3u" "${M3U8_STATIC_DIR}" "radioclassical.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/classical.m3u" "${M3U8_STATIC_DIR}" "radioclassical.m3u8"
             
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/club.m3u" "${M3U8_STATIC_DIR}" "radioclub.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/club.m3u" "${M3U8_STATIC_DIR}" "radioclub.m3u8"
             
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/college.m3u" "${M3U8_STATIC_DIR}" "radiocollege.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/college.m3u" "${M3U8_STATIC_DIR}" "radiocollege.m3u8"
             
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/comedy.m3u" "${M3U8_STATIC_DIR}" "radiocomedy.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/comedy.m3u" "${M3U8_STATIC_DIR}" "radiocomedy.m3u8"
             
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/country.m3u" "${M3U8_STATIC_DIR}" "radiocountry.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/country.m3u" "${M3U8_STATIC_DIR}" "radiocountry.m3u8"
             
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/dance.m3u" "${M3U8_STATIC_DIR}" "radiodance.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/dance.m3u" "${M3U8_STATIC_DIR}" "radiodance.m3u8"
           
             
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/soundtrack.m3u" "${M3U8_STATIC_DIR}" "radiosoundtrack.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/soundtrack.m3u" "${M3U8_STATIC_DIR}" "radiosoundtrack.m3u8"
           
             
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/mixed.m3u" "${M3U8_STATIC_DIR}" "radiomixed.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/mixed.m3u" "${M3U8_STATIC_DIR}" "radiomixed.m3u8"
           
             
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/musical.m3u" "${M3U8_STATIC_DIR}" "radiomusical.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/musical.m3u" "${M3U8_STATIC_DIR}" "radiomusical.m3u8"
           
             
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/pop.m3u" "${M3U8_STATIC_DIR}" "radiopop.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/pop.m3u" "${M3U8_STATIC_DIR}" "radiopop.m3u8"
           
             
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/punk.m3u" "${M3U8_STATIC_DIR}" "radiopunk.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/punk.m3u" "${M3U8_STATIC_DIR}" "radiopunk.m3u8"
           
             
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/rap.m3u" "${M3U8_STATIC_DIR}" "radiorap.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/rap.m3u" "${M3U8_STATIC_DIR}" "radiorap.m3u8"
           
             
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/reggae.m3u" "${M3U8_STATIC_DIR}" "radioreggae.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/reggae.m3u" "${M3U8_STATIC_DIR}" "radioreggae.m3u8"
           
             
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/retro.m3u" "${M3U8_STATIC_DIR}" "radioretro.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/retro.m3u" "${M3U8_STATIC_DIR}" "radioretro.m3u8"
           
             
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/rnb.m3u" "${M3U8_STATIC_DIR}" "radiornb.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/rnb.m3u" "${M3U8_STATIC_DIR}" "radiornb.m3u8"
           
             
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/rock.m3u" "${M3U8_STATIC_DIR}" "radiorock.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/rock.m3u" "${M3U8_STATIC_DIR}" "radiorock.m3u8"
           
             
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/spiritual.m3u" "${M3U8_STATIC_DIR}" "radiospiritual.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/spiritual.m3u" "${M3U8_STATIC_DIR}" "radiospiritual.m3u8"
           
             
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/sport.m3u" "${M3U8_STATIC_DIR}" "radiosport.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/sport.m3u" "${M3U8_STATIC_DIR}" "radiosport.m3u8"
           
             
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/techno.m3u" "${M3U8_STATIC_DIR}" "radiotechno.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/techno.m3u" "${M3U8_STATIC_DIR}" "radiotechno.m3u8"
           
             
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/top_40.m3u" "${M3U8_STATIC_DIR}" "top_40.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/top_40.m3u" "${M3U8_STATIC_DIR}" "top_40.m3u8"
           
             
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/urban.m3u" "${M3U8_STATIC_DIR}" "radiourban.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/urban.m3u" "${M3U8_STATIC_DIR}" "radiourban.m3u8"
           
             
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/usa.m3u" "${M3U8_STATIC_DIR}" "radiousa.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/usa.m3u" "${M3U8_STATIC_DIR}" "radiousa.m3u8"
           
             
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/various.m3u" "${M3U8_STATIC_DIR}" "radiovarious.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/various.m3u" "${M3U8_STATIC_DIR}" "radiovarious.m3u8"
           
             
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/world.m3u" "${M3U8_STATIC_DIR}" "radioworld.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/world.m3u" "${M3U8_STATIC_DIR}" "radioworld.m3u8"
          
           
             
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/gospel.m3u" "${M3U8_STATIC_DIR}" "radiogospel.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/gospel.m3u" "${M3U8_STATIC_DIR}" "radiogospel.m3u8"
          
           
             
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/hip_hop.m3u" "${M3U8_STATIC_DIR}" "radiohip_hop.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/junguler/m3u-radio-music-playlists/main/hip_hop.m3u" "${M3U8_STATIC_DIR}" "radiohip_hop.m3u8"
          
          echo "Command: './scripts/download_file_allow_failiure.sh "https://directory.owncast.online/api/iptv" "${M3U8_STATIC_DIR}" "owncast.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://directory.owncast.online/api/iptv" "${M3U8_STATIC_DIR}" "owncast.m3u8"
          
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/Sphinxroot/IPTVM3U/master/GotRadio.m3u" "${M3U8_STATIC_DIR}" "gotradio.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/Sphinxroot/IPTVM3U/master/GotRadio.m3u" "${M3U8_STATIC_DIR}" "gotradio.m3u8"
          
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/Sphinxroot/IPTVM3U/master/0nradio.com.m3u" "${M3U8_STATIC_DIR}" "onradio.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/Sphinxroot/IPTVM3U/master/0nradio.com.m3u" "${M3U8_STATIC_DIR}" "onradio.m3u8"
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/Sphinxroot/IPTVM3U/master/Streaming%20Service%20Network/allsprk.tv/allsprk.tv.m3u" "${M3U8_STATIC_DIR}" "allsprk.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/Sphinxroot/IPTVM3U/master/Streaming%20Service%20Network/allsprk.tv/allsprk.tv.m3u" "${M3U8_STATIC_DIR}" "allsprk.m3u8"
                    
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/Sphinxroot/IPTVM3U/master/Streaming%20Service%20Network/AVO.TV/AVO.TV.m3u" "${M3U8_STATIC_DIR}" "avo.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/Sphinxroot/IPTVM3U/master/Streaming%20Service%20Network/AVO.TV/AVO.TV.m3u" "${M3U8_STATIC_DIR}" "avo.m3u8"
          
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/Sphinxroot/IPTVM3U/master/Streaming%20Service%20Network/AdultSwim/AdultSwim.m3u" "${M3U8_STATIC_DIR}" "swim.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/Sphinxroot/IPTVM3U/master/Streaming%20Service%20Network/AdultSwim/AdultSwim.m3u" "${M3U8_STATIC_DIR}" "swim.m3u8"
          
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/Sphinxroot/IPTVM3U/master/Streaming%20Service%20Network/AnthymTV/AnthymTV.m3u" "${M3U8_STATIC_DIR}" "anthymtv.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/Sphinxroot/IPTVM3U/master/Streaming%20Service%20Network/AnthymTV/AnthymTV.m3u" "${M3U8_STATIC_DIR}" "anthymtv.m3u8"
          
          echo "Command: './scripts/download_file_allow_failiure.sh "https://www.apsattv.com/bumblebeetv.m3u" "${M3U8_STATIC_DIR}" "bumblebee.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://www.apsattv.com/bumblebeetv.m3u" "${M3U8_STATIC_DIR}" "bumblebee.m3u8"
          
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/TVPRO20/TV2/master/TV21.m3u" "${M3U8_STATIC_DIR}" "cablevision.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/TVPRO20/TV2/master/TV21.m3u" "${M3U8_STATIC_DIR}" "cablevision.m3u8"
           
          echo "Command: './scripts/download_file_allow_failiure.sh "https://cutt.ly/DistroTV" "${M3U8_STATIC_DIR}" "distrotv.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://cutt.ly/DistroTV" "${M3U8_STATIC_DIR}" "distrotv.m3u8"
          
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/Sphinxroot/IPTVM3U/master/Streaming%20Service%20Network/Freeli.tv/Freeli.tv.m3u" "${M3U8_STATIC_DIR}" "freeli.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/Sphinxroot/IPTVM3U/master/Streaming%20Service%20Network/Freeli.tv/Freeli.tv.m3u" "${M3U8_STATIC_DIR}" "freeli.m3u8"
          
          echo "Command: './scripts/download_file_allow_failiure.sh "https://od.lk/s/MzJfMTcwOTQ4Mjhf/Free2ViewTV-2021-Master-PC.m3u" "${M3U8_STATIC_DIR}" "free2view.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://od.lk/s/MzJfMTcwOTQ4Mjhf/Free2ViewTV-2021-Master-PC.m3u" "${M3U8_STATIC_DIR}" "free2view.m3u8"
          
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/Sphinxroot/IPTVM3U/master/Streaming%20Service%20Network/Gemonline/Gemonline.m3u" "${M3U8_STATIC_DIR}" "gemonline.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/Sphinxroot/IPTVM3U/master/Streaming%20Service%20Network/Gemonline/Gemonline.m3u" "${M3U8_STATIC_DIR}" "gemonline.m3u8"
          
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/Sphinxroot/IPTVM3U/master/Streaming%20Service%20Network/Good%20TV/GoodTV.m3u" "${M3U8_STATIC_DIR}" "goodtv.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/Sphinxroot/IPTVM3U/master/Streaming%20Service%20Network/Good%20TV/GoodTV.m3u" "${M3U8_STATIC_DIR}" "goodtv.m3u8"
          
          echo "Command: './scripts/download_file_allow_failiure.sh "https://www.apsattv.com/galxytv.m3u" "${M3U8_STATIC_DIR}" "galxytv.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://www.apsattv.com/galxytv.m3u" "${M3U8_STATIC_DIR}" "galxytv.m3u8"
          
          echo "Command: './scripts/download_file_allow_failiure.sh "https://www.apsattv.com/herogotv.m3u" "${M3U8_STATIC_DIR}" "herogotv.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://www.apsattv.com/herogotv.m3u" "${M3U8_STATIC_DIR}" "herogotv.m3u8"
          
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/Sphinxroot/IPTVM3U/master/Streaming%20Service%20Network/Jungo%2BTV/Jungo%2BTV.m3u" "${M3U8_STATIC_DIR}" "jungo.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/Sphinxroot/IPTVM3U/master/Streaming%20Service%20Network/Jungo%2BTV/Jungo%2BTV.m3u" "${M3U8_STATIC_DIR}" "jungo.m3u8"
          
          echo "Command: './scripts/download_file_allow_failiure.sh "https://www.apsattv.com/klowd.m3u" "${M3U8_STATIC_DIR}" "klowdtv.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://www.apsattv.com/klowd.m3u" "${M3U8_STATIC_DIR}" "klowdtv.m3u8"
          
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/DeltaSr95/LocalNow/master/LN.m3u" "${M3U8_STATIC_DIR}" "localnow.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/DeltaSr95/LocalNow/master/LN.m3u" "${M3U8_STATIC_DIR}" "localnow.m3u8"
          
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/Sphinxroot/IPTVM3U/master/Streaming%20Service%20Network/MyTvToGo/MyTvToGo.m3u" "${M3U8_STATIC_DIR}" "mytvtogo.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/Sphinxroot/IPTVM3U/master/Streaming%20Service%20Network/MyTvToGo/MyTvToGo.m3u" "${M3U8_STATIC_DIR}" "mytvtogo.m3u8"
          
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/matthuisman/i.mjh.nz/master/PBS/all.m3u8" "${M3U8_STATIC_DIR}" "pbs.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/matthuisman/i.mjh.nz/master/PBS/all.m3u8" "${M3U8_STATIC_DIR}" "pbs.m3u8"
          
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/iptv-org/iptv/master/channels/us_plex.m3u" "${M3U8_STATIC_DIR}" "us_plex.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/iptv-org/iptv/master/channels/us_plex.m3u" "${M3U8_STATIC_DIR}" "us_plex.m3u8"          
          
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/bitsbb01/PlutoIPTV/master/m3u8/pluto.m3u8" "${M3U8_STATIC_DIR}" "us_pluto.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/bitsbb01/PlutoIPTV/master/m3u8/pluto.m3u8" "${M3U8_STATIC_DIR}" "us_pluto.m3u8"
          
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/TVPRO20/PREMIUMHD/main/TV21.m3u" "${M3U8_STATIC_DIR}" "premiumhd.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/TVPRO20/PREMIUMHD/main/TV21.m3u" "${M3U8_STATIC_DIR}" "premiumhd.m3u8"
          
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/Sphinxroot/IPTVM3U/master/Streaming%20Service%20Network/Rad.TV/Rad.TV.m3u" "${M3U8_STATIC_DIR}" "rad.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/Sphinxroot/IPTVM3U/master/Streaming%20Service%20Network/Rad.TV/Rad.TV.m3u" "${M3U8_STATIC_DIR}" "rad.m3u8"
          
          echo "Command: './scripts/download_file_allow_failiure.sh "https://www.apsattv.com/redbox.m3u" "${M3U8_STATIC_DIR}" "redboxtv.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://www.apsattv.com/redbox.m3u" "${M3U8_STATIC_DIR}" "redboxtv.m3u8"
          
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/iptv-org/iptv/master/channels/us_roku.m3u" "${M3U8_STATIC_DIR}" "us_roku.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/iptv-org/iptv/master/channels/us_roku.m3u" "${M3U8_STATIC_DIR}" "us_roku.m3u8"
          
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/TVPRO20/TV/master/TV21.m3u" "${M3U8_STATIC_DIR}" "skydish.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/TVPRO20/TV/master/TV21.m3u" "${M3U8_STATIC_DIR}" "skydish.m3u8"
          
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/TVPRO20/SeriesHD/master/tv21.m3u" "${M3U8_STATIC_DIR}" "serieshd.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/TVPRO20/SeriesHD/master/tv21.m3u" "${M3U8_STATIC_DIR}" "serieshd.m3u8"
          
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/Sphinxroot/IPTVM3U/master/Streaming%20Service%20Network/Sluhay.by/Sluhay.by.m3u" "${M3U8_STATIC_DIR}" "sluhay.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/Sphinxroot/IPTVM3U/master/Streaming%20Service%20Network/Sluhay.by/Sluhay.by.m3u" "${M3U8_STATIC_DIR}" "sluhay.m3u8"
          
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/Sphinxroot/IPTVM3U/master/Streaming%20Service%20Network/Smash/smash_plus.m3u" "${M3U8_STATIC_DIR}" "smash_plus.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/Sphinxroot/IPTVM3U/master/Streaming%20Service%20Network/Smash/smash_plus.m3u" "${M3U8_STATIC_DIR}" "smash_plus.m3u8"
                    
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/iptv-org/iptv/master/channels/us_samsung.m3u" "${M3U8_STATIC_DIR}" "us_samsung.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/iptv-org/iptv/master/channels/us_samsung.m3u" "${M3U8_STATIC_DIR}" "us_samsung.m3u8"
                    
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/bitsbb01/i.mjh.nz/master/SamsungTVPlus/gb.m3u8" "${M3U8_STATIC_DIR}" "uk_samsung.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/bitsbb01/i.mjh.nz/master/SamsungTVPlus/gb.m3u8" "${M3U8_STATIC_DIR}" "uk_samsung.m3u8"
          
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/iptv-org/iptv/master/channels/us_stirr.m3u" "${M3U8_STATIC_DIR}" "us_stirr.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/iptv-org/iptv/master/channels/us_stirr.m3u" "${M3U8_STATIC_DIR}" "us_stirr.m3u8"
          
          echo "Command: './scripts/download_file_allow_failiure.sh "https://www.apsattv.com/tcl.m3u" "${M3U8_STATIC_DIR}" "tvl.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://www.apsattv.com/tcl.m3u" "${M3U8_STATIC_DIR}" "tvl.m3u8"
          
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/Sphinxroot/IPTVM3U/master/Streaming%20Service%20Network/TV25/TV25.m3u" "${M3U8_STATIC_DIR}" "tv25.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/Sphinxroot/IPTVM3U/master/Streaming%20Service%20Network/TV25/TV25.m3u" "${M3U8_STATIC_DIR}" "tv25.m3u8"
          
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/iptv-org/iptv/master/channels/us_tubi.m3u" "${M3U8_STATIC_DIR}" "us_tubi.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/iptv-org/iptv/master/channels/us_tubi.m3u" "${M3U8_STATIC_DIR}" "us_tubi.m3u8"
          
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/Sphinxroot/IPTVM3U/master/Streaming%20Service%20Network/VisionTV/VisionTV.m3u" "${M3U8_STATIC_DIR}" "visiontv.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/Sphinxroot/IPTVM3U/master/Streaming%20Service%20Network/VisionTV/VisionTV.m3u" "${M3U8_STATIC_DIR}" "visiontv.m3u8"
          
          echo "Command: './scripts/download_file_allow_failiure.sh "https://www.apsattv.com/veely.m3u" "${M3U8_STATIC_DIR}" "veely.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://www.apsattv.com/veely.m3u" "${M3U8_STATIC_DIR}" "veely.m3u8"
          
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/iptv-org/iptv/master/channels/us_vizio.m3u" "${M3U8_STATIC_DIR}" "us_vizio.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/iptv-org/iptv/master/channels/us_vizio.m3u" "${M3U8_STATIC_DIR}" "us_vizio.m3u8"
          
          echo "Command: './scripts/download_file_allow_failiure.sh "https://cutt.ly/WatchyourTV" "${M3U8_STATIC_DIR}" "watchyourtv.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://cutt.ly/WatchyourTV" "${M3U8_STATIC_DIR}" "watchyourtv.m3u8"
          
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/iptv-org/iptv/master/channels/us_xumo.m3u" "${M3U8_STATIC_DIR}" "us_xumo.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/iptv-org/iptv/master/channels/us_xumo.m3u" "${M3U8_STATIC_DIR}" "us_xumo.m3u8"
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/bitsbb01/YT_to_m3u/main/youtube.m3u" "${M3U8_STATIC_DIR}" "youtubetv.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/bitsbb01/YT_to_m3u/main/youtube.m3u" "${M3U8_STATIC_DIR}" "youtubetv.m3u8"
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/bitsbb01/IPTV-M3US/master/m3us/OFCVIPMovies2.m3u" "${M3U8_STATIC_DIR}" "vod2.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/bitsbb01/IPTV-M3US/master/m3us/OFCVIPMovies2.m3u" "${M3U8_STATIC_DIR}" "vod2.m3u8"
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/bitsbb01/IPTV-M3US/master/m3us/OFCVIPMovies.m3u" "${M3U8_STATIC_DIR}" "vod1.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/bitsbb01/IPTV-M3US/master/m3us/OFCVIPMovies.m3u" "${M3U8_STATIC_DIR}" "vod1.m3u8"
          echo "Command: './scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/bitsbb01/IPTV-M3US/master/m3us/new/__%20VIP%20MOVIES%20__.m3u" "${M3U8_STATIC_DIR}" "vod3.m3u8"'"
          ./scripts/download_file_allow_failiure.sh "https://raw.githubusercontent.com/bitsbb01/IPTV-M3US/master/m3us/new/__%20VIP%20MOVIES%20__.m3u" "${M3U8_STATIC_DIR}" "vod3.m3u8"
                                                  
          
      - name: Match EPG IDs to Static Files
        run: |
          echo "Command: './scripts/match_epgid_to_names.sh "${M3U8_STATIC_DIR}" "${M3U8_STATIC_DIR}"'"
          ./scripts/match_epgid_to_names.sh "${M3U8_STATIC_DIR}" "${M3U8_STATIC_DIR}"          
          
          ls -alt "${M3U8_STATIC_DIR}"        
 
      - name: Merge Files
        run: |
          git config --local user.email "action@github.com"
          git config --local user.name "GitHub Action"
          cat ./temp/m3u8_static/*.m3u8 > ./temp/m3u8_static/all/all-streams.m3u8       
          
          ls -alt "${M3U8_STATIC_DIR2}"        
               
          
          
      - name: Get epg
        run: |
         
          echo "Command: './scripts/download_file_allow_failiure.sh "https://github.com/epgshare01/share01/raw/master/epg_ripper_ALL_SOURCES1.xml.gz" "./tests/epg/" "epg_ripper_ALL_SOURCES1.xml.gz"'"
          ./scripts/download_file_allow_failiure.sh "https://github.com/epgshare01/share01/raw/master/epg_ripper_ALL_SOURCES1.xml.gz" "./tests/epg/" "epg_ripper_ALL_SOURCES1.xml.gz"
   
   
      - name: Get EPG from epgshare
        run: |
          echo "Command: './scripts/download_file_allow_failiure.sh "https://github.com/epgshare01/share01/raw/master/" "${EPG_TEMP_DIR}" "epg_ripper_ALL_SOURCES1.xml.gz"'"
          ./scripts/download_file_allow_failiure.sh "https://github.com/epgshare01/share01/raw/master/" "${EPG_TEMP_DIR}" "epg_ripper_ALL_SOURCES1.xml.gz"
          
          ls -alt "${EPG_TEMP_DIR}" 
          
          
      - name: Get the main all streams json
        run: |
        
          echo "Command: './scripts/download_file_allow_failiure.sh "https://github.com/bitsbb01/ez-iptvcat-scraper/blob/master/data/all-streams.json?raw=true" "./temp/all_streams_tmp/" "all-streams.json"'"
          ./scripts/download_file_allow_failiure.sh "https://github.com/bitsbb01/ez-iptvcat-scraper/blob/master/data/all-streams.json?raw=true" "./temp/all_streams_tmp/" "all-streams.json"
          
    
      ### PROCESS THE DATA ###
      - name: Convert all_streams
        run: |
          echo "Command: 'ls -alt ./temp/all_streams_tmp/'"
          ls -alt ./temp/all_streams_tmp/
          echo "Command: 'ls -alt ${M3U8_DIR}'"
          ls -alt ${M3U8_DIR}
          echo "Command: 'python ./scripts/iptvcat/convert_iptvcat_scraper_files.py "./temp/all_streams_tmp/" "${M3U8_DIR}"'"
          python ./scripts/iptvcat/convert_iptvcat_scraper_files.py "./temp/all_streams_tmp/" "${M3U8_DIR}"
          echo "Command: 'ls -alt ./temp/all_streams_tmp/'"
          ls -alt ./temp/all_streams_tmp/
          echo "Command: 'ls -alt ${M3U8_DIR}'"
          ls -alt ${M3U8_DIR}
          
      - name: Merge with Static All_Streams Files
        run: |
          ls -alt ${M3U8_DIR}
          ls -alt ${M3U8_STATIC_DIR2}
          echo "Command: './scripts/merge_m3u8_files_in_dirs.sh "${M3U8_DIR}" "${M3U8_STATIC_DIR2}"'"
          ./scripts/merge_m3u8_files_in_dirs.sh "${M3U8_DIR}" "${M3U8_STATIC_DIR2}"
          ls -alt ${M3U8_DIR}
          ls -alt ${M3U8_STATIC_DIR2}
                    
      - name: Add EPG URL to files
        run: |
          echo "Command: 'python ./scripts/add_epg_url_into_m3u8.py --epg_url "https://github.com/bitsbb01/m3u8_creator/raw/main/epg/epg_ripper_ALL_SOURCES1.xml.gz" --m3u8_in_dir "${M3U8_DIR}" --m3u8_out_dir "${M3U8_DIR}"'"
          python ./scripts/add_epg_url_into_m3u8.py --epg_url "https://github.com/bitsbb01/m3u8_creator/raw/main/epg/epg_ripper_ALL_SOURCES1.xml.gz" --m3u8_in_dir "${M3U8_DIR}" --m3u8_out_dir "${M3U8_DIR}"
      - name: Add Channel To Main Categories
        run: |
          echo "Command: 'python ./scripts/import_categories_into_m3u8.py --category_file "./ez_m3u8_creator/categories/main.json" --m3u8_in_dir "${M3U8_DIR}" --m3u8_out_dir "${M3U8_DIR}"'"
          python ./scripts/import_categories_into_m3u8.py --category_file "./ez_m3u8_creator/categories/main.json" --m3u8_in_dir "${M3U8_DIR}" --m3u8_out_dir "${M3U8_DIR}"
 
      - name: Match EPG IDs
        run: |
          echo "Command: './scripts/match_epgid_to_names.sh "${M3U8_DIR}" "${M3U8_DIR}"'"
          ./scripts/match_epgid_to_names.sh "${M3U8_DIR}" "${M3U8_DIR}"
                           
      - name: Push all changes
        uses: ad-m/github-push-action@master
        with:
          github_token: ${{ secrets.scrapper_token }}
          branch: ${{ github.ref }} 
             
      - name: Copy Static m3u8s
        uses: canastro/copy-file-action@master
        with:
          source: "./temp/m3u8_static/*.m3u8"
          target: "./m3u8"
          flags: '-r'
          
      ### This is where the copy function should work, to copy the m3u8 & epg to the data folder ###
      - name: Copy m3u8
        uses: canastro/copy-file-action@master
        with:
          source: "./tests/m3u8/*.m3u8"
          target: "./m3u8"
          flags: '-r'
          
          
      - name: Copy epg
        uses: canastro/copy-file-action@master
        with:
          source: "./tests/epg/*"
          target: "./epg"
          flags: '-r'
    
          
      - name: Copy json
        uses: canastro/copy-file-action@master
        with:
          source: "./temp/iptvcat*"
          target: "./json"
          flags: '-r'
                  
          
      - name: Get current date
        id: date
        run: echo "::set-output name=date::$(date '+%Y-%m-%d')"


      - name: Merge Files
        run: |
          git config --local user.email "action@github.com"
          git config --local user.name "GitHub Action"
          ls -1 ./m3u8/*.m3u8 > ./allstreams.txt
          cat ./m3u8/*.m3u8 > ./Compiled-all-Streams.m3u8
          cat ./m3u8/*.m3u8 > ./CompiledallStreams.m3u
                                    
      - name: create workflow artifact #this is created, so if theres an error, you can look back at previous yml
        uses: actions/upload-artifact@v2
        with:
         name: workflow_${{ steps.date.outputs.date }}
         path: .github/workflows/m3u8_converter.yml
       
       
                           
      - name: Push all changes
        uses: ad-m/github-push-action@master
        with:
          github_token: ${{ secrets.scrapper_token }}
          branch: ${{ github.ref }} 
          
      - name: Commit All Files
        uses: zwaldowski/git-commit-action@v1
        with:
             commit_message: Updated by Bot - ${{ steps.date.outputs.date }}
             working_directory: .

      - name: Push changes
        uses: ad-m/github-push-action@master
        with:
          github_token: ${{ secrets.scrapper_token }}
          branch: ${{ github.ref }}
          
